<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>在 RoadRunner 中创建地图 - CARLA 模拟器 中文文档</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u5728 RoadRunner \u4e2d\u521b\u5efa\u5730\u56fe";
        var mkdocs_page_input_path = "tuto_M_generate_map.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CARLA 模拟器 中文文档
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">主页</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">入门</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../start_introduction/">介绍</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../start_quickstart/">快速启动包安装</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">构建CARLA</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../build_linux/">Linux build</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_windows/">Windows build</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_update/">Update CARLA</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_system/">Build system</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_docker/">CARLA in Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_faq/">F.A.Q.</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">第一步</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../core_concepts/">核心概念</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_world/">第一、 世界和客户端</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_actors/">第二、 角色和蓝图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_map/">第三、地图和导航 </a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_sensors/">第四、 传感器和数据</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">高级概念</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_opendrive/">OpenDRIVE 独立模式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_ptv/">PTV-Vissim 联合仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_recorder/">Recorder</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_rendering_options/">渲染选项</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_rss/">RSS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_synchrony_timestep/">同步和时间步长</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_benchmarking/">基准性能</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_agents/">CARLA 代理</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">交通模拟</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ts_traffic_simulation_overview/">交通模拟概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_traffic_manager/">Traffic Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_sumo/">SUMO 联合仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_scenic/">Scenic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">参考</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../python_api/">Python API 参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bp_library/">Blueprint Library</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_cpp/">C++ 参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_recorder_binary_file_format/">Recorder 二进制文件格式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_sensors/">Sensors reference</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">插件</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../plugins_carlaviz/">carlaviz — web 可视化器</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ROS 桥接器</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ros_documentation/">ROS 桥文档</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">自定义地图</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_map_overview/">CARLA 中自定义地图的概述</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">在 RoadRunner 中创建地图</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction-to-roadrunner">Introduction to RoadRunner</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#before-you-start">Before you start</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#build-a-map-in-roadrunner">Build a map in RoadRunner</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#export-a-map-in-roadrunner">Export a map in RoadRunner</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#next-steps">Next steps</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_package/">在CARLA包导入地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_source/">在 CARLA 源构建中导入地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_alternative/">导入地图的替代方法</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_manual_map_package/">手动准备地图包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_layers/">自定义地图：分层地图: Layered maps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_add_tl/">自定义地图：红绿灯和标志</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_road_painter/">自定义地图：Road painter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_buildings/">自定义地图：程序建筑</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_weather_landscape/">自定义地图：天气和景观</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_generate_pedestrian_navigation/">生成行人导航</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">大型地图</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_overview/">大型地图概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_roadrunner/">在RoadRunner中创建大地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_import/">导入/打包大地图</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（通用）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_add_friction_triggers/">添加摩擦触发器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_control_vehicle_physics/">控制车辆物理模型</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_control_walker_skeletons/">控制行人骨骼</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_openstreetmap/">使用OpenStreetMap生成地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_retrieve_data/">检索模拟数据</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_carsim_integration/">CarSim 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_rllib_integration/">RLlib 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_chrono/">Chrono 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_docker_unreal/">在 Docker 中构建虚幻引擎UE和 CARLA</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（资产）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_add_vehicle/">添加新车辆</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_add_props/">添加新道具</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_create_standalone/">创建独立包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_material_customization/">材料定制</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（开发人员）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_contribute_assets/">如何升级内容</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_create_sensor/">创建一个传感器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_create_semantic_tags/">创建语义标签</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_customize_vehicle_suspension/">自定义车辆悬架</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_generate_colliders/">生成详细碰撞</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_make_release/">发布版本</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">CARLA 生态系统</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ecosys_ansys/">Ansys 实时雷达模型</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">贡献</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_contribution_guidelines/">贡献指南</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_code_of_conduct/">行为准则</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_coding_standard/">编码标准</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_doc_standard/">文档标准</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CARLA 模拟器 中文文档</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>自定义地图 &raquo;</li><li>在 RoadRunner 中创建地图</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="generating-maps-in-roadrunner">Generating Maps in RoadRunner</h1>
<p>RoadRunner is the recommended software to create maps to be imported into CARLA. This guide outlines what RoadRunner is, things to consider when building the map and how to export custom maps ready for importing into CARLA. </p>
<ul>
<li><a href="#introduction-to-roadrunner"><strong>Introduction to RoadRunner</strong></a></li>
<li><a href="#before-you-start"><strong>Before you start</strong></a></li>
<li><a href="#build-a-map-in-roadrunner"><strong>Build a map in RoadRunner</strong></a></li>
<li><a href="#export-a-map-in-roadrunner"><strong>Export a map in RoadRunner</strong></a></li>
<li><a href="#next-steps"><strong>Next steps</strong></a></li>
</ul>
<hr />
<h2 id="introduction-to-roadrunner">Introduction to RoadRunner</h2>
<p>RoadRunner is an interactive editor that lets you design 3D scenes for simulating and testing automated driving systems. It can be used to create road layouts and accompanying OpenDRIVE and geometry information. Find out more about RoadRunner <a href="https://www.mathworks.com/products/roadrunner.html">here</a>.</p>
<p>RoadRunner is part of the MATLAB Campus-Wide Licenses, so many universities can provide unlimited academic access. <a href="https://www.mathworks.com/academia/tah-support-program/eligibility.html">Check</a> if your university has access. Reach out to <em>automated-driving@mathworks.com</em> for any questions or troubles regarding accessibility. There is also a <a href="https://www.mathworks.com/products/roadrunner.html">trial version</a> available.</p>
<p>A license for RoadRunner is also available to everyone participating in the CARLA Leaderboard. Click <a href="https://www.mathworks.com/academia/student-competitions/carla-autonomous-driving-challenge.html">here</a> for more information.</p>
<hr />
<h2 id="before-you-start">Before you start</h2>
<p>You will need to install RoadRunner. You can follow the <a href="https://www.mathworks.com/help/roadrunner/ug/install-and-activate-roadrunner.html">installation guide</a> at the Mathworks website.   </p>
<hr />
<h2 id="build-a-map-in-roadrunner">Build a map in RoadRunner</h2>
<p>The specifics of how to build a map in RoadRunner go beyond the scope of this guide, however, there are video tutorials available in the <a href="https://www.mathworks.com/support/search.html?fq=asset_type_name:video%20category:roadrunner/index&amp;page=1&amp;s_tid=CRUX_topnav">RoadRunner documentation</a>.</p>
<p><strong>Keep in mind that a map heavy with props can slow the import process significantly.</strong> This is because Unreal Engine needs to convert every mesh to an Unreal asset. If you plan to import your map into a source build version of CARLA, we highly recommend that you only create the road layout in RoadRunner and leave any customization until after the map has been imported into Unreal Engine. CARLA provides several tools that you can use in the Unreal Engine editor to simplify the customization process.</p>
<hr />
<h2 id="export-a-map-in-roadrunner">Export a map in RoadRunner</h2>
<p>Below is a basic guideline to export your custom map from RoadRunner. You can find more detailed information about how to export to CARLA in <a href="https://www.mathworks.com/help/roadrunner/ug/Exporting-to-CARLA.html">MathWorks' documentation</a>.</p>
<p>Once you have made your map in RoadRunner you will be able to export it. Be aware that <strong>the road layout cannot be modified after it has been exported.</strong> Before exporting, ensure that:</p>
<ul>
<li>The map is centered at (0,0) to ensure the map can be visualized correctly in Unreal Engine.</li>
<li>The map definition is correct.</li>
<li>The map validation is correct, paying close attention to connections and geometries.</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p><img alt="CheckGeometry" src="../img/check_geometry.jpg" /></p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>Once the map is ready, click on the <code>OpenDRIVE Preview Tool</code> button to visualize the OpenDRIVE road network and give everything one last check.</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p><img alt="checkopen" src="../img/check_open.jpg" /></p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>OpenDrive Preview Tool</em> makes it easier to test the integrity of the map. If there are any errors with junctions, click on <code>Maneuver Tool</code>, and <code>Rebuild Maneuver Roads</code>.</p>
</div>
<p>When you are ready to export:</p>
<p><strong>1.</strong> Export the scene using the CARLA option:</p>
<ul>
<li>In the main toolbar, select <code>File</code> -&gt; <code>Export</code> -&gt; <code>CARLA (.fbx, .xodr, .rrdata.xml)</code></li>
</ul>
<p><strong>2.</strong> In the window that pops up:</p>
<blockquote>
<ul>
<li>
<p>Check the following options:</p>
<ul>
<li><em>Split by Segmentation</em>: Divides the mesh by semantic segmentation.</li>
<li><em>Power of Two Texture Dimensions</em>: Improves performance.</li>
<li><em>Embed Textures</em>: Ensures textures are embedded in the mesh.</li>
<li><em>Export to Tiles</em>: Choose the size of the tile or leave unchecked for only one piece.</li>
</ul>
</li>
<li>
<p>Leave unchecked:</p>
<ul>
<li><em>Export Individual Tiles</em>: Generates one <code>.fbx</code> file with all map pieces. </li>
</ul>
</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p><img alt="roadrunner_export" src="../img/roadrunner_export.png" /></p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p><strong>3.</strong> Choose the directory where you want to export your files and click <code>Export</code>. This will generate <code>&lt;mapName&gt;.fbx</code> and <code>&lt;mapName&gt;.xodr</code> files among others. </p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that the <code>.xodr</code> and the <code>.fbx</code> files have the same name.  </p>
</div>
<hr />
<h2 id="next-steps">Next steps</h2>
<p>You are now ready to import your map into CARLA. The next step will depend upon the kind of CARLA installation you are using:</p>
<ul>
<li><strong>For users of CARLA built from source</strong>, follow the guide <a href="../tuto_M_add_map_source/"><strong>here</strong></a>.</li>
<li><strong>For users of a packaged (binary) version of CARLA</strong>, follow the guide <a href="../tuto_M_add_map_package/"><strong>here</strong></a>.</li>
</ul>
<hr />
<p>If you have any questions about the process, then you can ask in the <a href="https://github.com/carla-simulator/carla/discussions">forum</a>.</p>
<div class="build-buttons">
<p>
<a href="https://github.com/carla-simulator/carla/discussions" target="_blank" class="btn btn-neutral" title="Go to the CARLA forum">
CARLA forum</a>
</p>
</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../tuto_M_custom_map_overview/" class="btn btn-neutral float-left" title="CARLA 中自定义地图的概述"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../tuto_M_add_map_package/" class="btn btn-neutral float-right" title="在CARLA包导入地图">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../tuto_M_custom_map_overview/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../tuto_M_add_map_package/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../extra.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
