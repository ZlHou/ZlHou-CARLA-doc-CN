<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>添加新道具 - CARLA 模拟器 中文文档</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u6dfb\u52a0\u65b0\u9053\u5177";
        var mkdocs_page_input_path = "tuto_A_add_props.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CARLA 模拟器 中文文档
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">主页</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">入门</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../start_introduction/">介绍</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../start_quickstart/">快速启动包安装</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">构建CARLA</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../build_linux/">Linux build</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_windows/">Windows build</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_update/">Update CARLA</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_system/">Build system</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_docker/">CARLA in Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_faq/">F.A.Q.</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">第一步</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../core_concepts/">核心概念</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_world/">第一、 世界和客户端</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_actors/">第二、 角色和蓝图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_map/">第三、地图和导航 </a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core_sensors/">第四、 传感器和数据</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">高级概念</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_opendrive/">OpenDRIVE 独立模式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_ptv/">PTV-Vissim 联合仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_recorder/">Recorder</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_rendering_options/">渲染选项</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_rss/">RSS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_synchrony_timestep/">同步和时间步长</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_benchmarking/">基准性能</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_agents/">CARLA 代理</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">交通模拟</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ts_traffic_simulation_overview/">交通模拟概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_traffic_manager/">Traffic Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adv_sumo/">SUMO 联合仿真</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_scenic/">Scenic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">参考</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../python_api/">Python API 参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bp_library/">Blueprint Library</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_cpp/">C++ 参考</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_recorder_binary_file_format/">Recorder 二进制文件格式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ref_sensors/">Sensors reference</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">插件</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../plugins_carlaviz/">carlaviz — web 可视化器</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ROS 桥接器</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ros_documentation/">ROS 桥文档</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">自定义地图</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_map_overview/">CARLA 中自定义地图的概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_generate_map/">在 RoadRunner 中创建地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_package/">在CARLA包导入地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_source/">在 CARLA 源构建中导入地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_add_map_alternative/">导入地图的替代方法</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_manual_map_package/">手动准备地图包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_layers/">自定义地图：分层地图: Layered maps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_add_tl/">自定义地图：红绿灯和标志</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_road_painter/">自定义地图：Road painter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_buildings/">自定义地图：程序建筑</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_custom_weather_landscape/">自定义地图：天气和景观</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_M_generate_pedestrian_navigation/">生成行人导航</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">大型地图</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_overview/">大型地图概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_roadrunner/">在RoadRunner中创建大地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../large_map_import/">导入/打包大地图</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（通用）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_add_friction_triggers/">添加摩擦触发器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_control_vehicle_physics/">控制车辆物理模型</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_control_walker_skeletons/">控制行人骨骼</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_openstreetmap/">使用OpenStreetMap生成地图</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_retrieve_data/">检索模拟数据</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_carsim_integration/">CarSim 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_rllib_integration/">RLlib 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_G_chrono/">Chrono 集成</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build_docker_unreal/">在 Docker 中构建虚幻引擎UE和 CARLA</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（资产）</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_add_vehicle/">添加新车辆</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">添加新道具</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#prepare-the-package">Prepare the package</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#create-the-folder-structure">Create the folder structure</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#create-the-json-description">Create the JSON description</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#ingestion-in-a-carla-package">Ingestion in a CARLA package</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#ingestion-in-a-build-from-source">Ingestion in a build from source</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_create_standalone/">创建独立包</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_A_material_customization/">材料定制</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">教程（开发人员）</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_contribute_assets/">如何升级内容</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_create_sensor/">创建一个传感器</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_create_semantic_tags/">创建语义标签</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_customize_vehicle_suspension/">自定义车辆悬架</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_generate_colliders/">生成详细碰撞</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tuto_D_make_release/">发布版本</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">CARLA 生态系统</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ecosys_ansys/">Ansys 实时雷达模型</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">贡献</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_contribution_guidelines/">贡献指南</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_code_of_conduct/">行为准则</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_coding_standard/">编码标准</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cont_doc_standard/">文档标准</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CARLA 模拟器 中文文档</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>教程（资产） &raquo;</li><li>添加新道具</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="add-new-props">Add new props</h1>
<p>Props are the assets that populate the scene, besides the map, and the vehicles. That includes streetlights, buildings, trees, and much more. The simulator can ingest new props anytime in a simple process. This is really useful to create customized environments in a map. </p>
<ul>
<li><a href="#prepare-the-package"><strong>Prepare the package</strong></a>  <ul>
<li><a href="#create-the-folder-structure">Create the folder structure</a>  </li>
<li><a href="#create-the-json-description">Create the JSON description</a>  </li>
</ul>
</li>
<li><a href="#ingestion-in-a-carla-package"><strong>Ingestion in a CARLA package</strong></a>  </li>
<li><a href="#ingestion-in-a-build-from-source"><strong>Ingestion in a build from source</strong></a>  </li>
</ul>
<hr />
<h2 id="prepare-the-package">Prepare the package</h2>
<h3 id="create-the-folder-structure">Create the folder structure</h3>
<p><strong>1. Create a folder inside <code>carla/Import</code>.</strong> The name of the folder is not relevant.  </p>
<p><strong>2. Create the subfolders.</strong> There should be one general subfolder for all the props, and inside of it, as many subfolders as props to import. </p>
<p><strong>3. Move the files of each prop to the corresponding subfolder.</strong> A prop subfolder will contain the <code>.fbx</code> mesh, and optionally, the textures required by it.  </p>
<p>For instance, an <code>Import</code> folder with two separate packages should have a structure similar to the one below.</p>
<pre><code class="language-sh">Import
│
├── Package01
│   ├── Package01.json
│   └── Props
│       ├── Prop01
│       │   ├── Prop01_Diff.png
│       │   ├── Prop01_Norm.png
│       │   ├── Prop01_Spec.png
│       │   └── Prop01.fbx
│       └── Prop02
│           └── Prop02.fbx
└── Package02
    ├── Packag02.json
    └── Props
        └── Prop03
            └── Prop03.fbx
</code></pre>
<h3 id="create-the-json-description">Create the JSON description</h3>
<p>Create a <code>.json</code> file in the root folder of the package. Name the file after the package. Note that this will be the distribution name. The content of the file will describe a JSON array of <strong>maps</strong> and <strong>props</strong> with basic information for each of them.  </p>
<p><strong>Maps</strong> are not part of this tutorial, so this definition will be empty. There is a specific tutorial to <a href="../tuto_M_custom_map_overview/"><strong>add a new map</strong></a>.  </p>
<p><strong>Props</strong> need the following parameters.  </p>
<ul>
<li><strong>name</strong> of the prop. This must be the same as the <code>.fbx</code>.  </li>
<li><strong>source</strong> path to the <code>.fbx</code>.  </li>
<li><strong>size</strong> estimation of the prop. The possible values are listed here.  <ul>
<li><code>tiny</code>  </li>
<li><code>small</code>  </li>
<li><code>medium</code>  </li>
<li><code>big</code>  </li>
<li><code>huge</code>  </li>
</ul>
</li>
<li><strong>tag</strong> value for the semantic segmentation. If the tag is misspelled, it will be read as <code>Unlabeled</code>. <ul>
<li><code>Bridge</code></li>
<li><code>Building</code></li>
<li><code>Dynamic</code></li>
<li><code>Fence</code></li>
<li><code>Ground</code></li>
<li><code>GuardRail</code></li>
<li><code>Other</code></li>
<li><code>Pedestrian</code></li>
<li><code>Pole</code></li>
<li><code>RailTrack</code></li>
<li><code>Road</code></li>
<li><code>RoadLine</code></li>
<li><code>SideWalk</code></li>
<li><code>Sky</code></li>
<li><code>Static</code></li>
<li><code>Terrain</code></li>
<li><code>TrafficLight</code></li>
<li><code>TrafficSign</code></li>
<li><code>Unlabeled</code></li>
<li><code>Vegetation</code></li>
<li><code>Vehicles</code></li>
<li><code>Wall</code></li>
<li><code>Water</code></li>
</ul>
</li>
</ul>
<p>In the end, the <code>.json</code> should look similar to the one below.</p>
<pre><code class="language-json">{
  &quot;maps&quot;: [
  ],
  &quot;props&quot;: [
    {
      &quot;name&quot;: &quot;MyProp01&quot;,
      &quot;size&quot;: &quot;medium&quot;,
      &quot;source&quot;: &quot;./Props/Prop01/Prop01.fbx&quot;,
      &quot;tag&quot;: &quot;SemanticSegmentationTag01&quot;
    },
    {
      &quot;name&quot;: &quot;MyProp02&quot;,
      &quot;size&quot;: &quot;small&quot;,
      &quot;source&quot;: &quot;./Props/Prop02/Prop02.fbx&quot;,
      &quot;tag&quot;: &quot;SemanticSegmentationTag02&quot;
    }
  ]
}
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Packages with the same name will produce an error.  </p>
</div>
<hr />
<h2 id="ingestion-in-a-carla-package">Ingestion in a CARLA package</h2>
<p>This is the method used to ingest the props into a CARLA package such as CARLA 0.9.8.  </p>
<p>A Docker image of Unreal Engine will be created. It acts as a black box that automatically imports the package into the CARLA image, and generates a ditribution package. The Docker image takes 4h and 400GB to be built. However, this is only needed the first time. </p>
<p><strong>1. Build a Docker image of Unreal Engine.</strong> Follow <a href="https://github.com/carla-simulator/carla/tree/master/Util/Docker">these instructions</a> to build the image.  </p>
<p><strong>2. Run the script to cook the props.</strong> In the folder <code>~/carla/Util/Docker</code> there is a script that connects with the Docker image previously created, and makes the ingestion automatically. It only needs the path for the input and output files, and the name of the package to be ingested.  </p>
<pre><code class="language-sh">python3 docker_tools.py --input ~/path_to_package --output ~/path_for_output_assets  --package=Package01
</code></pre>
<p><strong>3. Locate the package</strong>. The Docker should have generated the package <code>Package01.tar.gz</code> in the output path. This is the standalone package for the assets. </p>
<p><strong>4. Import the package into CARLA.</strong>  </p>
<ul>
<li>
<p><strong>On Windows</strong> extract the package in the <code>WindowsNoEditor</code> folder. </p>
</li>
<li>
<p><strong>On Linux</strong> move the package to the <code>Import</code> folder, and run the script to import it. </p>
</li>
</ul>
<pre><code class="language-sh">cd Util
./ImportAssets.sh
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is an alternative on Linux. Move the package to the <code>Import</code> folder and run the script <code>Util/ImportAssets.sh</code> to extract the package.</p>
</div>
<hr />
<h2 id="ingestion-in-a-build-from-source">Ingestion in a build from source</h2>
<p>This is the method to import the props into a CARLA build from source.  </p>
<p>The JSON file will be read to place the props inside the <code>Content</code> in Unreal Engine. Furthermore, it will create a <code>Package1.Package.json</code> file inside the package's <code>Config</code> folder. This will be used to define the props in the blueprint library, and expose them in the Python API. It will also be used if the package is exported as a <a href="../tuto_A_create_standalone/">standalone package</a>.</p>
<p>When everything is ready, run the command. </p>
<pre><code class="language-sh">make import
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that the package is inside the <code>Import</code> folder in CARLA. </p>
</div>
<hr />
<p>That is all there is to know about the different ways to import new props into CARLA. If there are any doubts, feel free to post these in the forum. </p>
<div class="build-buttons">
<p>
<a href="https://github.com/carla-simulator/carla/discussions/" target="_blank" class="btn btn-neutral" title="Go to the CARLA forum">
CARLA forum</a>
</p>
</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../tuto_A_add_vehicle/" class="btn btn-neutral float-left" title="添加新车辆"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../tuto_A_create_standalone/" class="btn btn-neutral float-right" title="创建独立包">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../tuto_A_add_vehicle/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../tuto_A_create_standalone/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../extra.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
